{"version":3,"sources":["uni-app:///main.js","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?20f0","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?511f","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?8788","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?54a4","uni-app:///pages/cart/index.vue","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?31c2","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?2c03","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?5002","webpack:///E:/项目/业小管/mini/pages/cart/index.vue?fe80"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Empty","data","inArray","isLoading","mode","list","total","checkedIds","totalPrice","options","text","style","backgroundColor","watch","handler","uni","immediate","onShow","methods","open","deleteShop","CartApi","then","app","onCalcTotalPrice","checkedList","unitPrice","tempPrice","getCartList","finally","onClearInvalidId","handleToggleMode","onChangeStepper","item","onUpdateCartNum","catch","setTimeout","onTargetGoods","goodsId","onTargetLife","lifeId","onTargetIndex","handleCheckItem","index","handleCheckAll","handleOrder","cartIds","handleDelete","title","content","showCancel","success","confirm","onClearCart"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACa;AACyB;;;AAG1F;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1EA;AAAA;AAAA;AAAA;AAAipB,CAAgB,sqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACoJrqB;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC,UACA;QACAC;QACAC;UACAC;QACA;MACA;IAEA;EACA;EACAC;IACA;IACAN;MACAO;QACA;QACA;QACA;QACAC;MACA;MACAC;IACA;IACA;IACAV;MACA;MACA;MACA;IACA;EACA;EAEA;AACA;AACA;EACAW;IACA;IACA;IACA;IACA;EACA;EAEAC;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACAC,mBACAC;QACAC;QACAA;MACA;MACA;IACA;IAGA;IACAC;MACA;MACA;MACA;QAAA;MAAA;MACA;MACA;MACAC;QACA;QACA;QACA;UACAC;QACA;UACAA;QACA;QACAC;MACA;MACAJ;IACA;IAEA;IACAK;MACA;MACAL;MACAF,eACAC;QACAC;QACAA;QACA;QACAA;MACA,GACAM;QAAA;MAAA;IACA;IAEA;IACAC;MACA;MACA;QAAA;MAAA;MACAP;IACA;IAEA;IACAQ;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACAC;QACAA;MACA;MACA;MACAA;MACA;MACAA;IACA;IAEA;IACAC;MACA;MACAb,2EACAC;QACA;QACAC;QACA;QACAA;QACA;QACAU;MACA,GACAE;QACA;QACAF;QACAG;UAAA;QAAA;MACA;IACA;IAEA;IACAC;MACA;QAAAC;MAAA;IACA;IAEA;IACAC;MACA;QAAAC;MAAA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;QAAA;MAAA;MACAC;IACA;IAEA;IACAC;MACA;QAAAvC;MACA;QAAA;MAAA;IACA;IAEA;IACAwC;MACA;MACA;QACA;QACAtB;UAAAnB;UAAA0C;QAAA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;MACA;MACAhC;QACAiC;QACAC;QACAC;QACAC;UAAA;UACA;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACAhC,8BACAC;QACAC;QACAA;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AC9XA;AAAA;AAAA;AAAA;AAAu7B,CAAgB,i7BAAG,EAAC,C;;;;;;;;;;;ACA38B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA4vC,CAAgB,ytCAAG,EAAC,C;;;;;;;;;;;ACAhxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cart/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/cart/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=457cfe48&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=457cfe48&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"457cfe48\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=457cfe48&scoped=true&\"","var components\ntry {\n  components = {\n    uSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-swipe-action/u-swipe-action\" */ \"@/uview-ui/components/u-swipe-action/u-swipe-action.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-number-box/u-number-box\" */ \"@/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.list.length\n  var l0 = _vm.__map(_vm.list, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = item.data_type == 1 ? _vm.inArray(item.id, _vm.checkedIds) : null\n    var m1 = item.data_type == 2 ? _vm.inArray(item.id, _vm.checkedIds) : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n    }\n  })\n  var g1 = _vm.list.length\n  var g2 = _vm.list.length\n  var g3 = g2\n    ? _vm.checkedIds.length > 0 && _vm.checkedIds.length === _vm.list.length\n    : null\n  var g4 = g2 && _vm.mode == \"normal\" ? _vm.checkedIds.join() : null\n  var g5 = g2 && _vm.mode == \"normal\" ? _vm.checkedIds.length : null\n  var g6 = g2 && _vm.mode == \"normal\" && g5 > 0 ? _vm.checkedIds.length : null\n  var g7 = g2 && _vm.mode == \"edit\" ? _vm.checkedIds.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"container\">\r\n    <!-- 页面顶部 -->\r\n    <view v-if=\"list.length\" class=\"head-info\">\r\n      <view class=\"cart-total\">\r\n        <text>共</text>\r\n        <text class=\"active\">{{ total }}</text>\r\n        <text>件商品</text>\r\n      </view>\r\n      <view class=\"cart-edit\" @click=\"handleToggleMode\">\r\n        <view v-if=\"mode == 'normal'\" class=\"normal\">\r\n          <text class=\"icon iconfont icon-bianji\"></text>\r\n          <text>编辑</text>\r\n        </view>\r\n        <view v-if=\"mode == 'edit'\" class=\"edit\">\r\n          <text>完成</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- 购物车商品列表 -->\r\n\t<u-swipe-action :show=\"item.show\" :index=\"index\"\r\n\t\tv-for=\"(item, index) in list\" :key=\"index\"\r\n\t\t@click=\"deleteShop\" @open=\"open\"\r\n\t\t:options=\"options\"\r\n\t>\r\n\t\t<view class=\" u-border-bottom cart-item\" v-if=\"item.data_type == 1\">\r\n\t\t\t<label class=\"item-radio\" @click.stop=\"handleCheckItem(item.id)\">\r\n\t\t\t  <radio class=\"radio\" color=\"#fa2209\" :checked=\"inArray(item.id, checkedIds)\" />\r\n\t\t\t</label>\r\n\t\t\t<view class=\"goods-image\" @click=\"onTargetGoods(item.goods_id)\">\r\n\t\t\t  <image class=\"image\" :src=\"item.goods.goods_image\" mode=\"scaleToFill\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"item-content\">\r\n\t\t\t  <view class=\"goods-title\" @click=\"onTargetGoods(item.goods_id)\">\r\n\t\t\t\t<text class=\"twoline-hide\">{{ item.goods.goods_name }}</text>\r\n\t\t\t  </view>\r\n\t\t\t  <view class=\"goods-props clearfix\">\r\n\t\t\t\t<view class=\"goods-props-item\" v-for=\"(props, idx) in item.goods.skuInfo.goods_props\" :key=\"idx\">\r\n\t\t\t\t  <text>{{ props.value.name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t  </view>\r\n\t\t\t  <view class=\"item-foot\">\r\n\t\t\t\t<view class=\"goods-price\">\r\n\t\t\t\t  <text class=\"unit\">￥</text>\r\n\t\t\t\t  <text class=\"value\">{{ item.goods.skuInfo.goods_price }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stepper\">\r\n\t\t\t\t  <u-number-box :min=\"1\" :value=\"item.goods_num\" :step=\"1\" @change=\"onChangeStepper($event, item)\" />\r\n\t\t\t\t</view>\r\n\t\t\t  </view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n    <view class=\" u-border-bottom cart-item\" v-if=\"item.data_type == 2\">\r\n      <label class=\"item-radio\" @click.stop=\"handleCheckItem(item.id)\">\r\n        <radio class=\"radio\" color=\"#fa2209\" :checked=\"inArray(item.id, checkedIds)\" />\r\n      </label>\r\n      <view class=\"goods-image\" @click=\"onTargetLife(item.goods_id)\">\r\n        <image class=\"image\" :src=\"item.life.life_image\" mode=\"scaleToFill\"></image>\r\n      </view>\r\n      <view class=\"item-content\">\r\n        <view class=\"goods-title\" @click=\"onTargetLife(item.goods_id)\">\r\n          <text class=\"twoline-hide\">{{ item.life.life_name }}</text>\r\n        </view>\r\n        <view class=\"goods-props clearfix\">\r\n          <view class=\"goods-props-item\" v-for=\"(props, idx) in item.life.skuInfo.life_props\" :key=\"idx\">\r\n            <text>{{ props.value.name }}</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"item-foot\">\r\n          <view class=\"goods-price\">\r\n            <text class=\"unit\">￥</text>\r\n            <text class=\"value\">{{ item.life.skuInfo.life_price }}</text>\r\n          </view>\r\n          <view class=\"stepper\">\r\n            <u-number-box :min=\"1\" :value=\"item.goods_num\" :step=\"1\" @change=\"onChangeStepper($event, item)\" />\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\t</u-swipe-action>\r\n\t<view style=\"height: 96rpx;\"></view>\r\n<!-- \t<view v-if=\"list.length\" class=\"cart-list\">\r\n\t  <view class=\"cart-item\" v-for=\"(item, index) in list\" :key=\"index\">\r\n\t    <label class=\"item-radio\" @click.stop=\"handleCheckItem(item.id)\">\r\n\t      <radio class=\"radio\" color=\"#fa2209\" :checked=\"inArray(item.id, checkedIds)\" />\r\n\t    </label>\r\n\t    <view class=\"goods-image\" @click=\"onTargetGoods(item.goods_id)\">\r\n\t      <image class=\"image\" :src=\"item.goods.goods_image\" mode=\"scaleToFill\"></image>\r\n\t    </view>\r\n\t    <view class=\"item-content\">\r\n\t      <view class=\"goods-title\" @click=\"onTargetGoods(item.goods_id)\">\r\n\t        <text class=\"twoline-hide\">{{ item.goods.goods_name }}</text>\r\n\t      </view>\r\n\t      <view class=\"goods-props clearfix\">\r\n\t        <view class=\"goods-props-item\" v-for=\"(props, idx) in item.goods.skuInfo.goods_props\" :key=\"idx\">\r\n\t          <text>{{ props.value.name }}</text>\r\n\t        </view>\r\n\t      </view>\r\n\t      <view class=\"item-foot\">\r\n\t        <view class=\"goods-price\">\r\n\t          <text class=\"unit\">￥</text>\r\n\t          <text class=\"value\">{{ item.goods.skuInfo.goods_price }}</text>\r\n\t        </view>\r\n\t        <view class=\"stepper\">\r\n\t          <u-number-box :min=\"1\" :value=\"item.goods_num\" :step=\"1\" @change=\"onChangeStepper($event, item)\" />\r\n\t        </view>\r\n\t      </view>\r\n\t    </view>\r\n\t  </view>\r\n\t</view> -->\r\n\r\n    <!-- 购物车数据为空 -->\r\n    <empty v-if=\"!list.length\" :isLoading=\"isLoading\" :custom-style=\"{ padding: '180rpx 50rpx' }\" tips=\"您的购物车是空的, 快去逛逛吧\">\r\n      <view slot=\"slot\" class=\"empty-ipt\" @click=\"onTargetIndex\">\r\n        <text>去逛逛</text>\r\n      </view>\r\n    </empty>\r\n    <!-- 底部操作栏 -->\r\n    <view v-if=\"list.length\" class=\"footer-fixed\">\r\n      <label class=\"all-radio\" @click=\"handleCheckAll\">\r\n        <radio class=\"radio\" color=\"#fa2209\" :checked=\"checkedIds.length > 0 && checkedIds.length === list.length\" />\r\n        <text>全选</text>\r\n      </label>\r\n      <view class=\"total-info\">\r\n        <text>合计：</text>\r\n        <view class=\"goods-price\">\r\n          <text class=\"unit\">￥</text>\r\n          <text class=\"value\">{{ totalPrice }}</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"cart-action\">\r\n        <view class=\"btn-wrapper\">\r\n          <!-- dev:下面的disabled条件使用checkedIds.join方式判断 -->\r\n          <!-- dev:通常情况下vue项目使用checkedIds.length更合理, 但是length属性在微信小程序中不起作用 -->\r\n          <view v-if=\"mode == 'normal'\" class=\"btn-item btn-main\" :class=\"{ disabled: checkedIds.join() == '' }\" @click=\"handleOrder()\">\r\n            <text>去结算 {{ checkedIds.length > 0 ? `(${checkedIds.length})` : '' }}</text>\r\n          </view>\r\n          <view v-if=\"mode == 'edit'\" class=\"btn-item btn-main\" :class=\"{ disabled: !checkedIds.length }\" @click=\"handleDelete()\">\r\n            <text>删除</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import { inArray, arrayIntersect, debounce } from '@/utils/util'\r\n  import { checkLogin, setCartTotalNum, setCartTabBadge } from '@/core/app'\r\n  import * as CartApi from '@/api/cart'\r\n  import Empty from '@/components/empty'\r\n\r\n  const CartIdsIndex = 'CartIds'\r\n\r\n  export default {\r\n    components: {\r\n      Empty\r\n    },\r\n    data() {\r\n      return {\r\n        inArray,\r\n        // 正在加载\r\n        isLoading: true,\r\n        // 当前模式: normal正常 edit编辑\r\n        mode: 'normal',\r\n        // 购物车商品列表\r\n        list: [],\r\n        // 购物车商品总数量\r\n        total: null,\r\n        // 选中的商品ID记录\r\n        checkedIds: [],\r\n        // 选中的商品总金额\r\n        totalPrice: '0.00',\r\n\t\toptions: [\r\n\t\t\t{\r\n\t\t\t\ttext: '删除',\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackgroundColor: '#dd524d'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n      }\r\n    },\r\n    watch: {\r\n      // 监听选中的商品\r\n      checkedIds: {\r\n        handler(val) {\r\n          // 计算合计金额\r\n          this.onCalcTotalPrice()\r\n          // 记录到缓存中\r\n          uni.setStorageSync(CartIdsIndex, val)\r\n        },\r\n        immediate: false\r\n      },\r\n      // 监听购物车商品总数量\r\n      total(val) {\r\n        // 缓存并设置角标\r\n        setCartTotalNum(val)\r\n        setCartTabBadge()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 生命周期函数--监听页面显示\r\n     */\r\n    onShow(options) {\r\n      // 获取购物车商品列表\r\n      checkLogin() ? this.getCartList() : this.isLoading = false\r\n      // 获取缓存中的选中记录\r\n      this.checkedIds = uni.getStorageSync(CartIdsIndex)\r\n    },\r\n\r\n    methods: {\r\n\t\t// 如果打开一个的时候，不需要关闭其他，则无需实现本方法\r\n\t\topen(index) {\r\n\t\t\t// 先将正在被操作的swipeAction标记为打开状态，否则由于props的特性限制，\r\n\t\t\t// 原本为'false'，再次设置为'false'会无效\r\n\t\t\tthis.list[index].show = true;\r\n\t\t\tthis.list.map((val, idx) => {\r\n\t\t\t\tif(index != idx) this.list[idx].show = false;\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t//左滑删除商品\r\n\t\tdeleteShop(index) {\r\n\t\t\tconst app = this\r\n\t\t\tlet arr = [app.list[index].id]\r\n\t\t\tCartApi.clear(arr)\r\n\t\t\t  .then(result => {\r\n\t\t\t    app.getCartList()\r\n\t\t\t    app.handleToggleMode()\r\n\t\t\t  })\r\n\t\t\t// this.list.splice(index, 1);\r\n\t\t},\r\n\r\n\r\n      // 计算合计金额 (根据选中的商品)\r\n      onCalcTotalPrice() {\r\n        const app = this\r\n        // 选中的商品记录\r\n        const checkedList = app.list.filter(item => inArray(item.id, app.checkedIds))\r\n        // 计算总金额\r\n        let tempPrice = 0;\r\n        checkedList.forEach(item => {\r\n          // 商品单价, 为了方便计算先转换单位为分 (整数)\r\n          let unitPrice = 0\r\n          if (item.data_type === 2) {\r\n            unitPrice += item.life.skuInfo.life_price * 100\r\n          } else {\r\n            unitPrice+= item.goods.skuInfo.goods_price * 100\r\n          }\r\n          tempPrice += unitPrice * item.goods_num\r\n        })\r\n        app.totalPrice = (tempPrice / 100).toFixed(2)\r\n      },\r\n\r\n      // 获取购物车商品列表\r\n      getCartList() {\r\n        const app = this\r\n        app.isLoading = true\r\n        CartApi.list()\r\n          .then(result => {\r\n            app.list = result.data.list\r\n            app.total = result.data.cartTotal\r\n            // 清除checkedIds中无效的ID\r\n            app.onClearInvalidId()\r\n          })\r\n          .finally(() => app.isLoading = false)\r\n      },\r\n\r\n      // 清除checkedIds中无效的ID\r\n      onClearInvalidId() {\r\n        const app = this\r\n        const listIds = app.list.map(item => item.id)\r\n        app.checkedIds = arrayIntersect(listIds, app.checkedIds)\r\n      },\r\n\r\n      // 切换当前模式\r\n      handleToggleMode() {\r\n        this.mode = this.mode == 'normal' ? 'edit' : 'normal'\r\n      },\r\n\r\n      // 监听步进器更改事件\r\n      onChangeStepper({ value }, item) {\r\n        // 这里是组织首次启动时的执行\r\n        if (item.goods_num == value) return\r\n        // 记录一个节流函数句柄\r\n        if (!item.debounceHandle) {\r\n          item.oldValue = item.goods_num\r\n          item.debounceHandle = debounce(this.onUpdateCartNum, 500)\r\n        }\r\n        // 更新商品数量\r\n        item.goods_num = value\r\n        // 提交更新购物车数量 (节流)\r\n        item.debounceHandle(item, item.oldValue, value)\r\n      },\r\n\r\n      // 提交更新购物车数量\r\n      onUpdateCartNum(item, oldValue, newValue) {\r\n        const app = this\r\n        CartApi.update(item.goods_id, item.goods_sku_id, newValue, item.data_type)\r\n          .then(result => {\r\n            // 更新商品数量\r\n            app.total = result.data.cartTotal\r\n            // 重新计算合计金额\r\n            app.onCalcTotalPrice()\r\n            // 清除节流函数句柄\r\n            item.debounceHandle = null\r\n          })\r\n          .catch(err => {\r\n            // 还原商品数量\r\n            item.goods_num = oldValue\r\n            setTimeout(() => app.$toast(err.errMsg), 10)\r\n          })\r\n      },\r\n\r\n      // 跳转到商品详情页\r\n      onTargetGoods(goodsId) {\r\n        this.$navTo('pages/goods/detail', { goodsId })\r\n      },\r\n\r\n      // 跳转到服务详情页\r\n      onTargetLife(lifeId) {\r\n        this.$navTo('pages/life/life/detail', { lifeId })\r\n      },\r\n\r\n      // 点击去逛逛按钮, 跳转到首页\r\n      onTargetIndex() {\r\n        this.$navTo('pages/index/index')\r\n      },\r\n\r\n      // 选中商品\r\n      handleCheckItem(cartId) {\r\n        const { checkedIds } = this\r\n        const index = checkedIds.findIndex(id => id === cartId)\r\n        index < 0 ? checkedIds.push(cartId) : checkedIds.splice(index, 1)\r\n      },\r\n\r\n      // 全选事件\r\n      handleCheckAll() {\r\n        const { checkedIds, list } = this\r\n        this.checkedIds = checkedIds.length === list.length ? [] : list.map(item => item.id)\r\n      },\r\n\r\n      // 结算选中的商品\r\n      handleOrder() {\r\n        const app = this\r\n        if (app.checkedIds.length) {\r\n          const cartIds = app.checkedIds.join()\r\n          app.$navTo('pages/checkout/index', { mode: 'cart', cartIds })\r\n        }\r\n      },\r\n\r\n      // 删除选中的商品弹窗事件\r\n      handleDelete() {\r\n        const app = this\r\n        if (!app.checkedIds.length) {\r\n          return false\r\n        }\r\n        uni.showModal({\r\n          title: '友情提示',\r\n          content: '您确定要删除该商品吗？',\r\n          showCancel: true,\r\n          success({ confirm }) {\r\n            // 确认删除\r\n            confirm && app.onClearCart()\r\n          }\r\n        })\r\n      },\r\n\r\n      // 确认删除商品\r\n      onClearCart() {\r\n        const app = this\r\n        CartApi.clear(app.checkedIds)\r\n          .then(result => {\r\n            app.getCartList()\r\n            app.handleToggleMode()\r\n          })\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  page {\r\n    background: #f5f5f5;\r\n  }\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n  // 页面顶部\r\n  .head-info {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 4rpx 30rpx;\r\n    // background-color: #fff;\r\n    height: 80rpx;\r\n\r\n    .cart-total {\r\n      font-size: 28rpx;\r\n      color: #333;\r\n\r\n      .active {\r\n        color: #FA2209;\r\n        margin: 0 2rpx;\r\n      }\r\n    }\r\n\r\n    .cart-edit {\r\n      padding-left: 20rpx;\r\n\r\n      .icon {\r\n        margin-right: 12rpx;\r\n      }\r\n\r\n      .edit {\r\n        color: #fa2209;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  // 购物车列表\r\n  .cart-list {\r\n    padding: 0 16rpx 110rpx 16rpx;\r\n  }\r\n\r\n  .cart-item {\r\n    background: #fff;\r\n    border-radius: 12rpx;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 30rpx 16rpx;\r\n    // margin-bottom: 24rpx;\r\n\r\n\r\n    .item-radio {\r\n      width: 56rpx;\r\n      height: 80rpx;\r\n      line-height: 80rpx;\r\n      margin-right: 10rpx;\r\n      text-align: center;\r\n\r\n      .radio {\r\n        transform: scale(0.76)\r\n      }\r\n    }\r\n\r\n    .goods-image {\r\n      width: 200rpx;\r\n      height: 200rpx;\r\n\r\n      .image {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        border-radius: 8rpx;\r\n      }\r\n    }\r\n\r\n    .item-content {\r\n      flex: 1;\r\n      padding-left: 24rpx;\r\n\r\n      .goods-title {\r\n        font-size: 28rpx;\r\n        max-height: 76rpx;\r\n      }\r\n\r\n      .goods-props {\r\n        margin-top: 14rpx;\r\n        height: 40rpx;\r\n        color: #ababab;\r\n        font-size: 24rpx;\r\n        overflow: hidden;\r\n\r\n        .goods-props-item {\r\n          display: inline-block;\r\n          margin-right: 14rpx;\r\n          padding: 4rpx 16rpx;\r\n          border-radius: 12rpx;\r\n          background-color: #F5F5F5;\r\n          width: auto;\r\n        }\r\n      }\r\n\r\n\r\n      .item-foot {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-top: 20rpx;\r\n\r\n        .goods-price {\r\n          vertical-align: bottom;\r\n          color: $uni-text-color-active;\r\n\r\n          .unit {\r\n            font-size: 24rpx;\r\n          }\r\n\r\n          .value {\r\n            font-size: 32rpx;\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  // 空数据按钮\r\n  .empty-ipt {\r\n    width: 220rpx;\r\n    margin: 0 auto;\r\n    font-size: 32rpx;\r\n    height: 64rpx;\r\n    line-height: 64rpx;\r\n    text-align: center;\r\n    color: #fff;\r\n    border-radius: 50rpx;\r\n    background: linear-gradient(to right, #f9211c, #ff6335);\r\n  }\r\n\r\n  // 底部操作栏\r\n  .footer-fixed {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 96rpx;\r\n    background: #fff;\r\n    padding: 0 30rpx;\r\n    position: fixed;\r\n    bottom: var(--window-bottom);\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 11;\r\n\r\n    .all-radio {\r\n      width: 140rpx;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .radio {\r\n        margin-bottom: -4rpx;\r\n        transform: scale(0.76)\r\n      }\r\n    }\r\n\r\n    .total-info {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: flex-end;\r\n      padding-right: 30rpx;\r\n\r\n      .goods-price {\r\n        vertical-align: bottom;\r\n        color: #fa2209;\r\n\r\n        .unit {\r\n          font-size: 24rpx;\r\n        }\r\n\r\n        .value {\r\n          font-size: 32rpx;\r\n        }\r\n      }\r\n    }\r\n\r\n    .cart-action {\r\n      width: 200rpx;\r\n\r\n      .btn-wrapper {\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n\r\n      .btn-item {\r\n        flex: 1;\r\n        font-size: 28rpx;\r\n        height: 72rpx;\r\n        line-height: 72rpx;\r\n        text-align: center;\r\n        color: #fff;\r\n        border-radius: 50rpx;\r\n      }\r\n\r\n      // 立即购买按钮\r\n      .btn-main {\r\n        background: linear-gradient(to right, #f9211c, #ff6335);\r\n\r\n        // 禁用按钮\r\n        &.disabled {\r\n          background: #ff9779;\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n</style>\r\n","import mod from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1689298238413\n      var cssReload = require(\"D:/ruanjian/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=1&id=457cfe48&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=1&id=457cfe48&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1689298241748\n      var cssReload = require(\"D:/ruanjian/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}