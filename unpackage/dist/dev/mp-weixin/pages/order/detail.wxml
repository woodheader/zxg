<block wx:if="{{!isLoading}}"><view class="container data-v-57d42baa"><view class="header data-v-57d42baa"><view class="order-status data-v-57d42baa"><view class="status-icon data-v-57d42baa"><block wx:if="{{order.order_status==OrderStatusEnum.NORMAL.value}}"><block class="data-v-57d42baa"><block wx:if="{{order.pay_status==PayStatusEnum.PENDING.value}}"><block class="data-v-57d42baa"><image class="image data-v-57d42baa" src="/static/order/status/wait_pay.png" mode="aspectFit"></image></block></block><block wx:else><block wx:if="{{order.delivery_status==DeliveryStatusEnum.NOT_DELIVERED.value}}"><block class="data-v-57d42baa"><image class="image data-v-57d42baa" src="/static/order/status/wait_deliver.png" mode="aspectFit"></image></block></block><block wx:else><block wx:if="{{order.receipt_status==ReceiptStatusEnum.NOT_RECEIVED.value}}"><block class="data-v-57d42baa"><image class="image data-v-57d42baa" src="/static/order/status/wait_receipt.png" mode="aspectFit"></image></block></block></block></block></block></block><block wx:if="{{order.order_status==OrderStatusEnum.COMPLETED.value}}"><block class="data-v-57d42baa"><image class="image data-v-57d42baa" src="/static/order/status/received.png" mode="aspectFit"></image></block></block><block wx:if="{{order.order_status==OrderStatusEnum.CANCELLED.value||order.order_status==OrderStatusEnum.APPLY_CANCEL.value}}"><block class="data-v-57d42baa"><image class="image data-v-57d42baa" src="/static/order/status/close.png" mode="aspectFit"></image></block></block></view><view class="status-text data-v-57d42baa"><text class="data-v-57d42baa">{{order.state_text}}</text></view></view><block wx:if="{{order.order_status==OrderStatusEnum.NORMAL.value}}"><view class="next-action data-v-57d42baa"><block wx:if="{{order.pay_status==PayStatusEnum.PENDING.value}}"><view data-event-opts="{{[['tap',[['onPay']]]]}}" class="action-btn data-v-57d42baa" bindtap="__e">去支付</view></block><block wx:if="{{order.delivery_status==DeliveryStatusEnum.DELIVERED.value&&order.receipt_status==ReceiptStatusEnum.NOT_RECEIVED.value}}"><view data-event-opts="{{[['tap',[['onReceipt',['$0'],['order.order_id']]]]]}}" class="action-btn data-v-57d42baa" bindtap="__e">确认收货</view></block></view></block></view><view class="delivery-address i-card data-v-57d42baa"><view class="link-man data-v-57d42baa"><text class="name data-v-57d42baa">{{order.address.name}}</text><text class="phone data-v-57d42baa">{{order.address.phone}}</text></view><view class="address data-v-57d42baa"><block wx:for="{{order.address.region}}" wx:for-item="region" wx:for-index="idx" wx:key="idx"><text class="region data-v-57d42baa">{{region}}</text></block><text class="detail data-v-57d42baa">{{order.address.detail}}</text></view></view><block wx:if="{{order.delivery_type==DeliveryTypeEnum.EXPRESS.value&&order.delivery_status==DeliveryStatusEnum.DELIVERED.value&&order.express}}"><view data-event-opts="{{[['tap',[['handleTargetExpress']]]]}}" class="express i-card data-v-57d42baa" bindtap="__e"><view class="main data-v-57d42baa"><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">物流公司</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{order.express.express_name}}</text></view></view><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">物流单号</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{order.express_no}}</text><view data-event-opts="{{[['tap',[['handleCopy',['$0'],['order.express_no']]]]]}}" class="act-copy data-v-57d42baa" catchtap="__e"><text class="data-v-57d42baa">复制</text></view></view></view></view><view class="right-arrow data-v-57d42baa"><text class="iconfont icon-arrow-right data-v-57d42baa"></text></view></view></block><view class="goods-list i-card data-v-57d42baa"><block wx:for="{{order.goods}}" wx:for-item="goods" wx:for-index="idx" wx:key="idx"><view class="goods-item data-v-57d42baa"><view data-event-opts="{{[['tap',[['handleTargetGoods',['$0'],[[['order.goods','',idx,'goods_id']]]]]]]}}" class="goods-main data-v-57d42baa" bindtap="__e"><view class="goods-image data-v-57d42baa"><image class="image data-v-57d42baa" src="{{goods.goods_image}}" mode="scaleToFill"></image></view><view class="goods-content data-v-57d42baa"><view class="goods-title data-v-57d42baa"><text class="twoline-hide data-v-57d42baa">{{goods.goods_name}}</text></view><view class="goods-props clearfix data-v-57d42baa"><block wx:for="{{goods.goods_props}}" wx:for-item="props" wx:for-index="idx" wx:key="idx"><view class="goods-props-item data-v-57d42baa"><text class="data-v-57d42baa">{{props.value.name}}</text></view></block></view></view><view class="goods-trade data-v-57d42baa"><view class="goods-price data-v-57d42baa"><text class="unit data-v-57d42baa">￥</text><text class="value data-v-57d42baa">{{goods.is_user_grade?goods.grade_goods_price:goods.goods_price}}</text></view><view class="goods-num data-v-57d42baa"><text class="data-v-57d42baa">{{"×"+goods.total_num}}</text></view></view></view></view></block></view><view class="order-info i-card data-v-57d42baa"><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">订单编号</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{order.order_no}}</text><view data-event-opts="{{[['tap',[['handleCopy',['$0'],['order.order_no']]]]]}}" class="act-copy data-v-57d42baa" bindtap="__e"><text class="data-v-57d42baa">复制</text></view></view></view><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">下单时间</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{order.create_time}}</text></view></view><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">买家留言</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{order.buyer_remark?order.buyer_remark:'--'}}</text></view></view></view><view class="trade-info i-card data-v-57d42baa"><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">订单金额</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{"￥"+order.total_price}}</text></view></view><block wx:if="{{order.coupon_money>0}}"><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">优惠券抵扣</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{"-￥"+order.coupon_money}}</text></view></view></block><block wx:if="{{order.points_money>0}}"><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">{{setting.points_name+"抵扣"}}</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{"-￥"+order.points_money}}</text></view></view></block><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">运费</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{"+￥"+order.express_price}}</text></view></view><block wx:if="{{order.update_price.value!='0.00'}}"><view class="info-item data-v-57d42baa"><view class="item-lable data-v-57d42baa">后台改价</view><view class="item-content data-v-57d42baa"><text class="data-v-57d42baa">{{order.update_price.symbol}}</text><text class="data-v-57d42baa">{{"￥"+order.update_price.value}}</text></view></view></block><view class="divider data-v-57d42baa"></view><view class="trade-total data-v-57d42baa"><text class="lable data-v-57d42baa">实付款</text><view class="goods-price data-v-57d42baa"><text class="unit data-v-57d42baa">￥</text><text class="value data-v-57d42baa">{{order.pay_price}}</text></view></view></view><block wx:if="{{order.order_status!=OrderStatusEnum.CANCELLED.value}}"><view class="footer-fixed data-v-57d42baa"><view class="btn-wrapper data-v-57d42baa"><block wx:if="{{order.pay_status==PayStatusEnum.PENDING.value}}"><block class="data-v-57d42baa"><view data-event-opts="{{[['tap',[['onCancel',['$0'],['order.order_id']]]]]}}" class="btn-item data-v-57d42baa" bindtap="__e">取消</view></block></block><block wx:if="{{order.order_status!=OrderStatusEnum.APPLY_CANCEL.value}}"><block class="data-v-57d42baa"><block wx:if="{{order.pay_status==PayStatusEnum.SUCCESS.value&&order.delivery_status==DeliveryStatusEnum.NOT_DELIVERED.value}}"><block class="data-v-57d42baa"><view data-event-opts="{{[['tap',[['onCancel',['$0'],['order.order_id']]]]]}}" class="btn-item data-v-57d42baa" bindtap="__e">申请取消</view></block></block></block></block><block wx:else><view class="f-28 col-8 data-v-57d42baa">取消申请中</view></block><block wx:if="{{order.pay_status==PayStatusEnum.PENDING.value}}"><block class="data-v-57d42baa"><view data-event-opts="{{[['tap',[['onPay']]]]}}" class="btn-item active data-v-57d42baa" bindtap="__e">去支付</view></block></block><block wx:if="{{order.delivery_status==DeliveryStatusEnum.DELIVERED.value&&order.receipt_status==ReceiptStatusEnum.NOT_RECEIVED.value}}"><block class="data-v-57d42baa"><view data-event-opts="{{[['tap',[['onReceipt',['$0'],['order.order_id']]]]]}}" class="btn-item active data-v-57d42baa" bindtap="__e">确认收货</view></block></block></view></view></block><u-popup bind:input="__e" vue-id="a2b0478a-1" mode="bottom" border-radius="26" closeable="{{true}}" value="{{showPayPopup}}" data-event-opts="{{[['^input',[['__set_model',['','showPayPopup','$event',[]]]]]]}}" class="data-v-57d42baa" bind:__l="__l" vue-slots="{{['default']}}"><view class="pay-popup data-v-57d42baa"><view class="title data-v-57d42baa">请选择支付方式</view><view class="pop-content data-v-57d42baa"><view data-event-opts="{{[['tap',[['onSelectPayType',['$0'],['PayTypeEnum.WECHAT.value']]]]]}}" class="pay-item dis-flex flex-x-between data-v-57d42baa" bindtap="__e"><view class="item-left dis-flex flex-y-center data-v-57d42baa"><view class="item-left_icon wechat data-v-57d42baa"><text class="iconfont icon-wechat-pay data-v-57d42baa"></text></view><view class="item-left_text data-v-57d42baa"><text class="data-v-57d42baa">{{PayTypeEnum.WECHAT.name}}</text></view></view></view><view data-event-opts="{{[['tap',[['onSelectPayType',['$0'],['PayTypeEnum.BALANCE.value']]]]]}}" class="pay-item dis-flex flex-x-between data-v-57d42baa" bindtap="__e"><view class="item-left dis-flex flex-y-center data-v-57d42baa"><view class="item-left_icon balance data-v-57d42baa"><text class="iconfont icon-balance-pay data-v-57d42baa"></text></view><view class="item-left_text data-v-57d42baa"><text class="data-v-57d42baa">{{PayTypeEnum.BALANCE.name}}</text></view></view></view></view></view></u-popup></view></block>